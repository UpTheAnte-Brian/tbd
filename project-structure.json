[
  {
    "type": "directory",
    "name": ".",
    "contents": [
      { "type": "file", "name": ".DS_Store" },
      { "type": "file", "name": ".env.example" },
      { "type": "file", "name": ".env.local" },
      { "type": "file", "name": ".env.test.local" },
      { "type": "file", "name": ".eslintrc.js" },
      {
        "type": "directory",
        "name": ".github",
        "contents": [
          { "type": "file", "name": "copilot-instructions.md" },
          {
            "type": "directory",
            "name": "prompts",
            "contents": [
              { "type": "file", "name": "new-react-form.prompt.md" },
              { "type": "file", "name": "security.prompt.md" }
            ]
          }
        ]
      },
      { "type": "file", "name": ".gitignore" },
      { "type": "directory", "name": ".storybook" },
      {
        "type": "directory",
        "name": ".vscode",
        "contents": [
          { "type": "file", "name": "extensions.json" },
          { "type": "file", "name": "launch.json" },
          { "type": "file", "name": "settings.json" }
        ]
      },
      { "type": "file", "name": "AGENT.md" },
      {
        "type": "directory",
        "name": "api",
        "contents": [{ "type": "directory", "name": "districts" }]
      },
      {
        "type": "directory",
        "name": "app",
        "contents": [
          {
            "type": "directory",
            "name": "account",
            "contents": [{ "type": "file", "name": "page.tsx" }]
          },
          {
            "type": "directory",
            "name": "admin",
            "contents": [{ "type": "file", "name": "page.tsx" }]
          },
          {
            "type": "directory",
            "name": "api",
            "contents": [
              {
                "type": "directory",
                "name": "admin",
                "contents": [
                  {
                    "type": "directory",
                    "name": "set-role",
                    "contents": [{ "type": "file", "name": "route.ts" }]
                  }
                ]
              },
              {
                "type": "directory",
                "name": "branding",
                "contents": [
                  {
                    "type": "directory",
                    "name": "assets",
                    "contents": [
                      {
                        "type": "directory",
                        "name": "[id]",
                        "contents": [
                          { "type": "file", "name": "route.ts" },
                          {
                            "type": "directory",
                            "name": "upload-url",
                            "contents": [{ "type": "file", "name": "route.ts" }]
                          }
                        ]
                      },
                      { "type": "file", "name": "route.ts" }
                    ]
                  },
                  {
                    "type": "directory",
                    "name": "slots",
                    "contents": [{ "type": "file", "name": "route.ts" }]
                  }
                ]
              },
              {
                "type": "directory",
                "name": "business-users",
                "contents": [{ "type": "file", "name": "route.ts" }]
              },
              {
                "type": "directory",
                "name": "businesses",
                "contents": [
                  {
                    "type": "directory",
                    "name": "[id]",
                    "contents": [{ "type": "file", "name": "route.ts" }]
                  },
                  {
                    "type": "directory",
                    "name": "approve",
                    "contents": [{ "type": "file", "name": "route.ts" }]
                  },
                  { "type": "directory", "name": "claimed" },
                  {
                    "type": "directory",
                    "name": "reject",
                    "contents": [{ "type": "file", "name": "route.ts" }]
                  },
                  { "type": "file", "name": "route.ts" }
                ]
              },
              { "type": "directory", "name": "district-users" },
              {
                "type": "directory",
                "name": "districts",
                "contents": [
                  {
                    "type": "directory",
                    "name": "[id]",
                    "contents": [{ "type": "file", "name": "route.ts" }]
                  },
                  { "type": "file", "name": "route.ts" }
                ]
              },
              {
                "type": "directory",
                "name": "entities",
                "contents": [
                  {
                    "type": "directory",
                    "name": "[id]",
                    "contents": [
                      {
                        "type": "directory",
                        "name": "branding",
                        "contents": [
                          {
                            "type": "directory",
                            "name": "assets",
                            "contents": [{ "type": "file", "name": "route.ts" }]
                          },
                          {
                            "type": "directory",
                            "name": "palettes",
                            "contents": [
                              {
                                "type": "directory",
                                "name": "[paletteId]",
                                "contents": [
                                  { "type": "file", "name": "route.ts" }
                                ]
                              },
                              { "type": "file", "name": "route.ts" }
                            ]
                          },
                          { "type": "file", "name": "route.ts" },
                          {
                            "type": "directory",
                            "name": "typography",
                            "contents": [{ "type": "file", "name": "route.ts" }]
                          }
                        ]
                      },
                      {
                        "type": "directory",
                        "name": "geometries",
                        "contents": [{ "type": "file", "name": "route.ts" }]
                      },
                      {
                        "type": "directory",
                        "name": "governance",
                        "contents": [
                          {
                            "type": "directory",
                            "name": "meetings",
                            "contents": [
                              {
                                "type": "directory",
                                "name": "[meetingId]",
                                "contents": [
                                  {
                                    "type": "directory",
                                    "name": "board-packet",
                                    "contents": [
                                      {
                                        "type": "directory",
                                        "name": "approve",
                                        "contents": [
                                          { "type": "file", "name": "route.ts" }
                                        ]
                                      },
                                      {
                                        "type": "directory",
                                        "name": "create",
                                        "contents": [
                                          { "type": "file", "name": "route.ts" }
                                        ]
                                      },
                                      {
                                        "type": "directory",
                                        "name": "update-content",
                                        "contents": [
                                          { "type": "file", "name": "route.ts" }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "directory",
                                    "name": "minutes",
                                    "contents": [
                                      {
                                        "type": "directory",
                                        "name": "approve",
                                        "contents": [
                                          { "type": "file", "name": "route.ts" }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "directory",
                            "name": "motions",
                            "contents": [
                              {
                                "type": "directory",
                                "name": "[motionId]",
                                "contents": [
                                  {
                                    "type": "directory",
                                    "name": "finalize",
                                    "contents": [
                                      { "type": "file", "name": "route.ts" }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "directory",
                        "name": "map",
                        "contents": [{ "type": "file", "name": "route.ts" }]
                      },
                      { "type": "file", "name": "route.ts" },
                      {
                        "type": "directory",
                        "name": "users",
                        "contents": [{ "type": "file", "name": "route.ts" }]
                      }
                    ]
                  },
                  { "type": "file", "name": "route.ts" }
                ]
              },
              {
                "type": "directory",
                "name": "entity-users",
                "contents": [{ "type": "file", "name": "route.ts" }]
              },
              {
                "type": "directory",
                "name": "governance",
                "contents": [
                  {
                    "type": "directory",
                    "name": "approvals",
                    "contents": [{ "type": "file", "name": "route.ts" }]
                  },
                  {
                    "type": "directory",
                    "name": "board-members",
                    "contents": [
                      {
                        "type": "directory",
                        "name": "[id]",
                        "contents": [{ "type": "file", "name": "route.ts" }]
                      }
                    ]
                  },
                  {
                    "type": "directory",
                    "name": "boards",
                    "contents": [
                      {
                        "type": "directory",
                        "name": "[boardId]",
                        "contents": [
                          {
                            "type": "directory",
                            "name": "meetings",
                            "contents": [{ "type": "file", "name": "route.ts" }]
                          },
                          {
                            "type": "directory",
                            "name": "members",
                            "contents": [{ "type": "file", "name": "route.ts" }]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "directory",
                    "name": "meetings",
                    "contents": [
                      {
                        "type": "directory",
                        "name": "[meetingId]",
                        "contents": [
                          {
                            "type": "directory",
                            "name": "attendance",
                            "contents": [{ "type": "file", "name": "route.ts" }]
                          },
                          {
                            "type": "directory",
                            "name": "minutes",
                            "contents": [{ "type": "file", "name": "route.ts" }]
                          },
                          {
                            "type": "directory",
                            "name": "motions",
                            "contents": [{ "type": "file", "name": "route.ts" }]
                          },
                          {
                            "type": "directory",
                            "name": "quorum",
                            "contents": [{ "type": "file", "name": "route.ts" }]
                          },
                          { "type": "file", "name": "route.ts" }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "directory",
                    "name": "motions",
                    "contents": [
                      {
                        "type": "directory",
                        "name": "[motionId]",
                        "contents": [
                          { "type": "file", "name": "route.ts" },
                          {
                            "type": "directory",
                            "name": "votes",
                            "contents": [{ "type": "file", "name": "route.ts" }]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              { "type": "directory", "name": "kml" },
              {
                "type": "directory",
                "name": "map",
                "contents": [
                  {
                    "type": "directory",
                    "name": "entities",
                    "contents": [
                      {
                        "type": "directory",
                        "name": "[entityId]",
                        "contents": [
                          {
                            "type": "directory",
                            "name": "children",
                            "contents": [{ "type": "file", "name": "route.ts" }]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "directory",
                    "name": "home",
                    "contents": [{ "type": "file", "name": "route.ts" }]
                  },
                  {
                    "type": "directory",
                    "name": "states",
                    "contents": [
                      {
                        "type": "directory",
                        "name": "[slug]",
                        "contents": [
                          { "type": "directory", "name": "districts" }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "directory",
                "name": "me",
                "contents": [
                  {
                    "type": "directory",
                    "name": "profile",
                    "contents": [{ "type": "file", "name": "route.ts" }]
                  }
                ]
              },
              {
                "type": "directory",
                "name": "nonprofit-users",
                "contents": [
                  {
                    "type": "directory",
                    "name": "[id]",
                    "contents": [{ "type": "file", "name": "route.ts" }]
                  },
                  { "type": "file", "name": "route.ts" }
                ]
              },
              {
                "type": "directory",
                "name": "nonprofits",
                "contents": [
                  {
                    "type": "directory",
                    "name": "[id]",
                    "contents": [
                      {
                        "type": "directory",
                        "name": "governance",
                        "contents": [{ "type": "file", "name": "route.ts" }]
                      },
                      {
                        "type": "directory",
                        "name": "metadata",
                        "contents": [{ "type": "file", "name": "route.ts" }]
                      },
                      { "type": "file", "name": "route.ts" }
                    ]
                  },
                  { "type": "file", "name": "route.ts" }
                ]
              },
              {
                "type": "directory",
                "name": "profiles",
                "contents": [
                  {
                    "type": "directory",
                    "name": "search",
                    "contents": [{ "type": "file", "name": "route.ts" }]
                  }
                ]
              },
              {
                "type": "directory",
                "name": "receipts",
                "contents": [{ "type": "file", "name": "route.ts" }]
              },
              {
                "type": "directory",
                "name": "send-email",
                "contents": [{ "type": "file", "name": "route.ts" }]
              },
              { "type": "file", "name": "set-token-cookie.ts" },
              {
                "type": "directory",
                "name": "stripe",
                "contents": [
                  {
                    "type": "directory",
                    "name": "create-checkout-session",
                    "contents": [{ "type": "file", "name": "route.ts" }]
                  },
                  {
                    "type": "directory",
                    "name": "create-district-checkout-session",
                    "contents": [{ "type": "file", "name": "route.ts" }]
                  },
                  {
                    "type": "directory",
                    "name": "create-subscription-session",
                    "contents": [{ "type": "file", "name": "route.ts" }]
                  },
                  {
                    "type": "directory",
                    "name": "get-session",
                    "contents": [{ "type": "file", "name": "route.ts" }]
                  },
                  {
                    "type": "directory",
                    "name": "receipt",
                    "contents": [{ "type": "file", "name": "route.ts" }]
                  },
                  {
                    "type": "directory",
                    "name": "webhook",
                    "contents": [{ "type": "file", "name": "route.ts" }]
                  }
                ]
              },
              {
                "type": "directory",
                "name": "user",
                "contents": [
                  {
                    "type": "directory",
                    "name": "role",
                    "contents": [{ "type": "file", "name": "route.ts" }]
                  }
                ]
              },
              { "type": "directory", "name": "user-districts" },
              {
                "type": "directory",
                "name": "users",
                "contents": [
                  {
                    "type": "directory",
                    "name": "[id]",
                    "contents": [
                      {
                        "type": "directory",
                        "name": "district",
                        "contents": [{ "type": "file", "name": "route.ts" }]
                      },
                      {
                        "type": "directory",
                        "name": "districts",
                        "contents": [{ "type": "file", "name": "route.ts" }]
                      },
                      { "type": "file", "name": "route.ts" }
                    ]
                  },
                  {
                    "type": "directory",
                    "name": "me",
                    "contents": [{ "type": "file", "name": "route.ts" }]
                  },
                  { "type": "file", "name": "route.ts" }
                ]
              }
            ]
          },
          {
            "type": "directory",
            "name": "auth",
            "contents": [
              {
                "type": "directory",
                "name": "(login)",
                "contents": [
                  { "type": "file", "name": "actions.ts" },
                  { "type": "file", "name": "login.tsx" },
                  {
                    "type": "directory",
                    "name": "sign-in",
                    "contents": [{ "type": "file", "name": "page.tsx" }]
                  },
                  {
                    "type": "directory",
                    "name": "sign-up",
                    "contents": [{ "type": "file", "name": "page.tsx" }]
                  }
                ]
              },
              {
                "type": "directory",
                "name": "callback",
                "contents": [{ "type": "file", "name": "route.ts" }]
              },
              {
                "type": "directory",
                "name": "components",
                "contents": [
                  { "type": "file", "name": "button.tsx" },
                  { "type": "file", "name": "TokenSync.tsx" }
                ]
              },
              {
                "type": "directory",
                "name": "confirm",
                "contents": [{ "type": "file", "name": "route.ts" }]
              },
              {
                "type": "directory",
                "name": "set-role-cookie",
                "contents": [{ "type": "file", "name": "route.ts" }]
              },
              {
                "type": "directory",
                "name": "set-token-cookie",
                "contents": [{ "type": "file", "name": "route.ts" }]
              },
              {
                "type": "directory",
                "name": "signout",
                "contents": [{ "type": "file", "name": "route.ts" }]
              }
            ]
          },
          {
            "type": "directory",
            "name": "businesses",
            "contents": [
              {
                "type": "directory",
                "name": "[id]",
                "contents": [{ "type": "file", "name": "page.tsx" }]
              },
              { "type": "file", "name": "page.tsx" }
            ]
          },
          {
            "type": "directory",
            "name": "components",
            "contents": [
              { "type": "file", "name": "Account.tsx" },
              { "type": "file", "name": "AUNLogo.tsx" },
              {
                "type": "directory",
                "name": "branding",
                "contents": [
                  { "type": "file", "name": "BrandPaletteCube.tsx" },
                  { "type": "file", "name": "ColorPaletteEditor.tsx" },
                  { "type": "file", "name": "EntityLogo.tsx" },
                  {
                    "type": "directory",
                    "name": "panels",
                    "contents": [
                      { "type": "file", "name": "BrandAssetsSection.tsx" },
                      { "type": "file", "name": "BrandPalettesSection.tsx" },
                      { "type": "file", "name": "BrandTypographySection.tsx" },
                      { "type": "file", "name": "EntityBrandingPanel.tsx" }
                    ]
                  },
                  { "type": "file", "name": "TypographyEditor.tsx" },
                  { "type": "file", "name": "TypographyShowcase.tsx" }
                ]
              },
              {
                "type": "directory",
                "name": "businesses",
                "contents": [
                  { "type": "file", "name": "overview.tsx" },
                  { "type": "file", "name": "registration.tsx" }
                ]
              },
              {
                "type": "directory",
                "name": "calendar",
                "contents": [{ "type": "file", "name": "calendar.tsx" }]
              },
              { "type": "file", "name": "DesktopMenu.tsx" },
              {
                "type": "directory",
                "name": "districts",
                "contents": [
                  { "type": "directory", "name": "branding" },
                  { "type": "file", "name": "district-pop-up.tsx" },
                  { "type": "file", "name": "district-search.tsx" },
                  { "type": "file", "name": "DistrictDonationsSummary.tsx" },
                  {
                    "type": "directory",
                    "name": "panels",
                    "contents": [{ "type": "file", "name": "overview.tsx" }]
                  }
                ]
              },
              { "type": "file", "name": "DonationsTable.tsx" },
              { "type": "file", "name": "DynamicIcon.tsx" },
              {
                "type": "directory",
                "name": "entities",
                "contents": [
                  { "type": "file", "name": "EntityPageLayout.tsx" },
                  {
                    "type": "directory",
                    "name": "hooks",
                    "contents": [
                      { "type": "file", "name": "useEntityTabParam.ts" }
                    ]
                  },
                  {
                    "type": "directory",
                    "name": "panels",
                    "contents": [
                      { "type": "file", "name": "EntityPanel.tsx" },
                      { "type": "file", "name": "EntityPanelContent.tsx" },
                      { "type": "file", "name": "EntityPanelTabs.tsx" }
                    ]
                  },
                  {
                    "type": "directory",
                    "name": "shared",
                    "contents": [
                      { "type": "file", "name": "EntityHeader.tsx" },
                      { "type": "file", "name": "EntitySidebar.tsx" }
                    ]
                  },
                  {
                    "type": "directory",
                    "name": "tabs",
                    "contents": [
                      {
                        "type": "directory",
                        "name": "branding",
                        "contents": [
                          { "type": "file", "name": "EntityBrandingTab.tsx" }
                        ]
                      },
                      {
                        "type": "directory",
                        "name": "map",
                        "contents": [
                          { "type": "file", "name": "EntityMapTab.tsx" }
                        ]
                      },
                      {
                        "type": "directory",
                        "name": "overview",
                        "contents": [
                          { "type": "file", "name": "EntityOverviewTab.tsx" }
                        ]
                      },
                      {
                        "type": "directory",
                        "name": "users",
                        "contents": [
                          { "type": "file", "name": "EntityUsersTab.tsx" }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "directory",
                "name": "keeper-archive",
                "contents": [
                  { "type": "file", "name": "buttons.tsx" },
                  { "type": "file", "name": "cards.tsx" },
                  { "type": "file", "name": "nav-links.tsx" },
                  { "type": "file", "name": "pagination.tsx" },
                  { "type": "file", "name": "search.tsx" },
                  { "type": "file", "name": "skeletons.tsx" },
                  { "type": "file", "name": "status.tsx" }
                ]
              },
              { "type": "file", "name": "loading-spinner.tsx" },
              {
                "type": "directory",
                "name": "maps",
                "contents": [
                  { "type": "file", "name": "attendance-overlay-style.ts" },
                  { "type": "file", "name": "entity-map-explorer.tsx" },
                  { "type": "file", "name": "entity-map-shell.tsx" },
                  { "type": "file", "name": "marker.tsx" }
                ]
              },
              { "type": "file", "name": "MobMenu.tsx" },
              {
                "type": "directory",
                "name": "nav",
                "contents": [
                  { "type": "file", "name": "breadcrumbs.tsx" },
                  { "type": "file", "name": "NavBar.tsx" }
                ]
              },
              {
                "type": "directory",
                "name": "nonprofits",
                "contents": [
                  { "type": "file", "name": "BoardOfDirectors.tsx" },
                  { "type": "file", "name": "GovernancePanel.tsx" },
                  { "type": "file", "name": "NonprofitCreateDrawer.tsx" },
                  { "type": "file", "name": "NonprofitHeader.tsx" },
                  { "type": "file", "name": "overview.tsx" },
                  { "type": "directory", "name": "panels" }
                ]
              },
              {
                "type": "directory",
                "name": "places",
                "contents": [
                  { "type": "file", "name": "place-map.tsx" },
                  { "type": "file", "name": "place-search.tsx" },
                  { "type": "file", "name": "PlaceDetails.tsx" }
                ]
              },
              { "type": "file", "name": "SignInButton.tsx" },
              {
                "type": "directory",
                "name": "stripe",
                "contents": [
                  { "type": "file", "name": "DistrictDonationButton.tsx" },
                  { "type": "file", "name": "RecurringDonationButton.tsx" },
                  { "type": "file", "name": "UtaDonationButton.tsx" }
                ]
              },
              {
                "type": "directory",
                "name": "ui",
                "contents": [
                  { "type": "file", "name": "avatar.tsx" },
                  { "type": "file", "name": "button.tsx" },
                  { "type": "file", "name": "district-ext-weblink-header.tsx" },
                  { "type": "file", "name": "district-sidebar.tsx" },
                  { "type": "file", "name": "input.tsx" },
                  { "type": "file", "name": "user-roles-assignments.tsx" }
                ]
              },
              {
                "type": "directory",
                "name": "user",
                "contents": [
                  { "type": "file", "name": "AccordionCard.tsx" },
                  { "type": "file", "name": "MyBusinesses.tsx" },
                  { "type": "file", "name": "MyDistricts.tsx" },
                  { "type": "file", "name": "MyNonprofits.tsx" },
                  { "type": "file", "name": "MyProfile.tsx" }
                ]
              }
            ]
          },
          {
            "type": "directory",
            "name": "contact",
            "contents": [{ "type": "file", "name": "page.tsx" }]
          },
          {
            "type": "directory",
            "name": "data",
            "contents": [
              { "type": "file", "name": "auth.ts" },
              { "type": "file", "name": "branding-summary.ts" },
              { "type": "file", "name": "businesses-dto.ts" },
              { "type": "file", "name": "districts-dto.ts" },
              { "type": "file", "name": "entity-assets.ts" },
              { "type": "file", "name": "entity-branding.ts" },
              { "type": "file", "name": "governance-dto.ts" },
              { "type": "file", "name": "nonprofit-dto.ts" },
              { "type": "file", "name": "nonprofit-users-dto.ts" },
              { "type": "file", "name": "receipt-dto.ts" },
              { "type": "file", "name": "users.ts" }
            ]
          },
          {
            "type": "directory",
            "name": "districts",
            "contents": [
              {
                "type": "directory",
                "name": "[id]",
                "contents": [
                  { "type": "file", "name": "layout.tsx" },
                  { "type": "file", "name": "page.tsx" }
                ]
              },
              { "type": "file", "name": "page.tsx" }
            ]
          },
          {
            "type": "directory",
            "name": "donate",
            "contents": [
              {
                "type": "directory",
                "name": "[districtId]",
                "contents": [{ "type": "file", "name": "page.tsx" }]
              },
              { "type": "file", "name": "page.tsx" },
              {
                "type": "directory",
                "name": "success",
                "contents": [{ "type": "file", "name": "page.tsx" }]
              }
            ]
          },
          {
            "type": "directory",
            "name": "entities",
            "contents": [
              {
                "type": "directory",
                "name": "[id]",
                "contents": [{ "type": "file", "name": "page.tsx" }]
              }
            ]
          },
          {
            "type": "directory",
            "name": "error",
            "contents": [{ "type": "file", "name": "page.tsx" }]
          },
          {
            "type": "directory",
            "name": "hooks",
            "contents": [
              { "type": "file", "name": "useBrandingAssets.ts" },
              { "type": "file", "name": "useBrandingSummary.ts" },
              { "type": "file", "name": "useBusiness.ts" },
              { "type": "file", "name": "useClaimedBusinesses.ts" },
              { "type": "file", "name": "useDistrict.ts" },
              { "type": "file", "name": "useEntityBranding.ts" },
              { "type": "file", "name": "useEntityPalettes.ts" },
              { "type": "file", "name": "useLabelMarkers.ts" },
              { "type": "file", "name": "useMarkers.ts" },
              { "type": "file", "name": "useNonprofit.ts" },
              { "type": "file", "name": "useUser.tsx" },
              { "type": "file", "name": "useUserById.ts" }
            ]
          },
          {
            "type": "directory",
            "name": "info",
            "contents": [
              {
                "type": "directory",
                "name": "fundamentals",
                "contents": [{ "type": "file", "name": "page.tsx" }]
              },
              {
                "type": "directory",
                "name": "growth",
                "contents": [{ "type": "file", "name": "page.tsx" }]
              },
              { "type": "file", "name": "page.tsx" },
              {
                "type": "directory",
                "name": "uptheante",
                "contents": [{ "type": "file", "name": "page.tsx" }]
              }
            ]
          },
          { "type": "file", "name": "layout.tsx" },
          {
            "type": "directory",
            "name": "lib",
            "contents": [
              { "type": "file", "name": "agGridSetup.ts" },
              {
                "type": "directory",
                "name": "api",
                "contents": [
                  { "type": "file", "name": "errors.ts" },
                  { "type": "file", "name": "handler.ts" }
                ]
              },
              {
                "type": "directory",
                "name": "auth",
                "contents": [
                  { "type": "file", "name": "entityRoles.ts" },
                  { "type": "file", "name": "middleware.ts" },
                  { "type": "file", "name": "platformAdmin.ts" }
                ]
              },
              {
                "type": "directory",
                "name": "branding",
                "contents": [{ "type": "file", "name": "resolveBranding.ts" }]
              },
              {
                "type": "directory",
                "name": "district",
                "contents": [{ "type": "file", "name": "utils.ts" }]
              },
              { "type": "file", "name": "entities.ts" },
              { "type": "file", "name": "getBoundsFromGeoJSON.ts" },
              {
                "type": "directory",
                "name": "keeper-archive",
                "contents": [
                  { "type": "file", "name": "actions.ts" },
                  { "type": "file", "name": "data.ts" },
                  { "type": "file", "name": "definitions.ts" },
                  { "type": "file", "name": "utils.ts" }
                ]
              },
              { "type": "file", "name": "mail.ts" },
              { "type": "file", "name": "map-context.ts" },
              { "type": "file", "name": "menus.ts" },
              { "type": "file", "name": "menuUtils.ts" },
              {
                "type": "directory",
                "name": "providers",
                "contents": [
                  { "type": "file", "name": "GoogleMapsProvider.tsx" },
                  { "type": "file", "name": "ReactQueryProvider.tsx" }
                ]
              },
              {
                "type": "directory",
                "name": "server",
                "contents": [
                  { "type": "file", "name": "entities.ts" },
                  { "type": "file", "name": "entity-geometries.ts" }
                ]
              },
              { "type": "directory", "name": "storage" },
              {
                "type": "directory",
                "name": "styles",
                "contents": [
                  { "type": "file", "name": "fonts.ts" },
                  { "type": "file", "name": "global.css" },
                  { "type": "file", "name": "style.css" }
                ]
              },
              {
                "type": "directory",
                "name": "types",
                "contents": [
                  { "type": "file", "name": "governance-approvals.ts" },
                  { "type": "file", "name": "governance.ts" },
                  { "type": "file", "name": "map.ts" },
                  { "type": "file", "name": "nonprofits.ts" },
                  { "type": "file", "name": "types.ts" }
                ]
              }
            ]
          },
          {
            "type": "directory",
            "name": "map",
            "contents": [{ "type": "file", "name": "page.tsx" }]
          },
          {
            "type": "directory",
            "name": "nonprofits",
            "contents": [
              {
                "type": "directory",
                "name": "[id]",
                "contents": [{ "type": "file", "name": "page.tsx" }]
              },
              { "type": "file", "name": "page.tsx" }
            ]
          },
          { "type": "file", "name": "page.tsx" },
          {
            "type": "directory",
            "name": "privacy",
            "contents": [{ "type": "file", "name": "page.tsx" }]
          },
          {
            "type": "directory",
            "name": "providers",
            "contents": [
              { "type": "file", "name": "DistrictBrandingProvider.tsx" },
              { "type": "file", "name": "EntityBrandingAssetsProvider.tsx" },
              {
                "type": "file",
                "name": "EntityBrandingAssetsProviderClient.tsx"
              },
              { "type": "file", "name": "EntityThemeProvider.tsx" },
              { "type": "file", "name": "EntityThemeProviderClient.tsx" },
              { "type": "file", "name": "UserProviderClient.tsx" }
            ]
          },
          {
            "type": "directory",
            "name": "receipts",
            "contents": [{ "type": "file", "name": "page.tsx" }]
          },
          {
            "type": "directory",
            "name": "states",
            "contents": [{ "type": "directory", "name": "[slug]" }]
          },
          {
            "type": "directory",
            "name": "tailwind",
            "contents": [{ "type": "file", "name": "page.tsx" }]
          },
          {
            "type": "directory",
            "name": "terms",
            "contents": [{ "type": "file", "name": "page.tsx" }]
          },
          {
            "type": "directory",
            "name": "users",
            "contents": [
              {
                "type": "directory",
                "name": "[id]",
                "contents": [{ "type": "file", "name": "page.tsx" }]
              },
              { "type": "file", "name": "page.tsx" }
            ]
          }
        ]
      },
      { "type": "file", "name": "config.ts" },
      { "type": "file", "name": "database.types.ts" },
      {
        "type": "directory",
        "name": "docs",
        "contents": [
          { "type": "file", "name": "entity-page-layout.md" },
          { "type": "file", "name": "env.md" }
        ]
      },
      { "type": "file", "name": "eslint.config.mjs" },
      {
        "type": "directory",
        "name": "gpt-keepers",
        "contents": [{ "type": "file", "name": "GovernanceImprovements.txt" }]
      },
      { "type": "file", "name": "middleware.ts" },
      { "type": "file", "name": "next-env.d.ts" },
      { "type": "file", "name": "next.config.ts" },
      { "type": "file", "name": "package-lock.json" },
      { "type": "file", "name": "package.json" },
      { "type": "file", "name": "postcss.config.js" },
      { "type": "file", "name": "project-structure.json" },
      {
        "type": "directory",
        "name": "public",
        "contents": [
          {
            "type": "directory",
            "name": "AnteUpNation",
            "contents": [
              { "type": "file", "name": "AnteUpNation.svg" },
              { "type": "file", "name": "AUN-mountains-with-text.svg" }
            ]
          },
          {
            "type": "directory",
            "name": "customers",
            "contents": [
              { "type": "file", "name": "amy-burns.png" },
              { "type": "file", "name": "balazs-orban.png" },
              { "type": "file", "name": "delba-de-oliveira.png" },
              { "type": "file", "name": "evil-rabbit.png" },
              { "type": "file", "name": "lee-robinson.png" },
              { "type": "file", "name": "michael-novotny.png" }
            ]
          },
          {
            "type": "directory",
            "name": "districtLogos",
            "contents": [{ "type": "file", "name": "10277000000.svg" }]
          },
          { "type": "file", "name": "favicon.ico" },
          { "type": "file", "name": "hero-desktop.png" },
          { "type": "file", "name": "hero-mobile.png" },
          { "type": "file", "name": "logo.webp" },
          { "type": "file", "name": "opengraph-image.png" },
          {
            "type": "directory",
            "name": "UTALogos",
            "contents": [
              { "type": "file", "name": "1.png" },
              { "type": "file", "name": "2.png" },
              { "type": "file", "name": "4.png" },
              { "type": "file", "name": "5.png" },
              { "type": "file", "name": "UTALogo.png" },
              { "type": "file", "name": "UTAOrgLogo.png" }
            ]
          }
        ]
      },
      { "type": "file", "name": "README.md" },
      {
        "type": "directory",
        "name": "scratchfiles",
        "contents": [
          { "type": "file", "name": "autocomplete.js" },
          { "type": "file", "name": "autocomplete.ts" },
          { "type": "file", "name": "file1.js" },
          { "type": "file", "name": "file1.tsx" },
          { "type": "file", "name": "file2.js" },
          { "type": "file", "name": "file2.tsx" },
          { "type": "file", "name": "gpt_plans.txt" },
          { "type": "file", "name": "gpt-chat-ref.txt" },
          { "type": "file", "name": "na.txt" },
          { "type": "file", "name": "rest-client.http" },
          { "type": "file", "name": "test.css" },
          { "type": "file", "name": "test.js" },
          { "type": "file", "name": "test.json" },
          { "type": "file", "name": "test.sql" },
          { "type": "file", "name": "test.ts" },
          { "type": "file", "name": "test1.json" }
        ]
      },
      {
        "type": "directory",
        "name": "scripts",
        "contents": [
          { "type": "file", "name": ".DS_Store" },
          { "type": "file", "name": "check-env.ts" },
          { "type": "file", "name": "clear-logos.ts" },
          {
            "type": "directory",
            "name": "enrich-role",
            "contents": [
              { "type": "file", "name": ".npmrc" },
              { "type": "file", "name": "deno.json" },
              { "type": "file", "name": "index.ts" }
            ]
          },
          {
            "type": "directory",
            "name": "geojson",
            "contents": [
              { "type": "file", "name": "attendance_areas_display.geojson" },
              { "type": "file", "name": "attendance_areas_display1.geojson" },
              {
                "type": "file",
                "name": "mn_attendance_areas_simplified_to_MP.geojson"
              },
              {
                "type": "file",
                "name": "mn_attendance_areas_simplified.geojson"
              },
              { "type": "file", "name": "mn_attendance_areas.geojson" },
              { "type": "file", "name": "mn-districts.geojson" },
              { "type": "file", "name": "mn-schools.geojson" },
              {
                "type": "file",
                "name": "school_attendance_areas copy.geojson"
              },
              { "type": "file", "name": "us_states_2023.geojson" }
            ]
          },
          { "type": "file", "name": "import-mn-attendance-areas.ts" },
          { "type": "file", "name": "import-mn-schools.ts" },
          { "type": "file", "name": "import-sd-mn.ts" },
          { "type": "file", "name": "import-states-geojson.js" },
          { "type": "file", "name": "migrate-dev-to-test.sh" },
          {
            "type": "directory",
            "name": "rls",
            "contents": [
              { "type": "file", "name": "01_reset_rls.sql" },
              { "type": "file", "name": "03_rebuild_grants.sql" }
            ]
          },
          { "type": "file", "name": "test.ts" }
        ]
      },
      {
        "type": "directory",
        "name": "supabase",
        "contents": [
          {
            "type": "directory",
            "name": ".branches",
            "contents": [{ "type": "file", "name": "_current_branch" }]
          },
          { "type": "file", "name": ".gitignore" },
          {
            "type": "directory",
            "name": ".temp",
            "contents": [
              { "type": "file", "name": "cli-latest" },
              { "type": "file", "name": "gotrue-version" },
              { "type": "file", "name": "pooler-url" },
              { "type": "file", "name": "postgres-version" },
              { "type": "file", "name": "project-ref" },
              { "type": "file", "name": "rest-version" },
              { "type": "file", "name": "storage-migration" },
              { "type": "file", "name": "storage-version" }
            ]
          },
          { "type": "file", "name": "config.toml" },
          {
            "type": "directory",
            "name": "migrations",
            "contents": [
              { "type": "file", "name": "20250831045206_remote_schema.sql" },
              { "type": "file", "name": "20250905041934_remote_schema.sql" },
              { "type": "file", "name": "20250915025610_remote_schema.sql" },
              { "type": "file", "name": "20250923035715_remote_schema.sql" },
              {
                "type": "file",
                "name": "20251220000000_add_entity_types_table.sql"
              },
              {
                "type": "file",
                "name": "20251220001000_clear_legacy_district_metadata.sql"
              },
              {
                "type": "file",
                "name": "20251220002000_drop_district_metadata.sql"
              },
              {
                "type": "file",
                "name": "20251220004000_branding_entity_ref_reset.sql"
              },
              {
                "type": "file",
                "name": "20260102000000_seed_brand_asset_slots_non_district.sql"
              }
            ]
          }
        ]
      },
      { "type": "file", "name": "tailwind.config.ts" },
      { "type": "file", "name": "tsconfig.json" },
      { "type": "file", "name": "tsconfig.next.json" },
      {
        "type": "directory",
        "name": "types",
        "contents": [
          { "type": "file", "name": "mapbox-togeojson.d.ts" },
          { "type": "file", "name": "next-auth.d.ts" }
        ]
      },
      {
        "type": "directory",
        "name": "utils",
        "contents": [
          {
            "type": "directory",
            "name": "supabase",
            "contents": [
              { "type": "file", "name": "client.ts" },
              { "type": "file", "name": "middleware.ts" },
              { "type": "file", "name": "route.ts" },
              { "type": "file", "name": "server.ts" },
              { "type": "file", "name": "service-worker.ts" }
            ]
          }
        ]
      }
    ]
  },
  {
    "type": "refactor_plan",
    "title": "Entity-first consolidation (proposed target structure + action map)",
    "principles": [
      "Keep app routes feature-first: entities/branding/governance/map/auth",
      "Centralize RBAC + entity resolution in lib/server",
      "Prefer entity-generic components over district/nonprofit one-offs",
      "Move DTOs/types into domain folders; avoid a flat data dumping-ground",
      "Quarantine or delete keeper-archive and scratchfiles (do not import from them)"
    ],
    "ignore_suggestions": [
      "node_modules",
      ".git",
      ".next",
      "dist",
      "build",
      "coverage",
      "**/.DS_Store",
      "**/*.env* (do not commit secrets)"
    ],
    "target_structure_sketch": {
      "app": {
        "api": {
          "entities": {
            "[id]": {
              "route.ts": "GET entity summary/detail",
              "users": { "route.ts": "GET/POST entity users" },
              "branding": {
                "route.ts": "GET branding summary",
                "assets": { "route.ts": "GET/POST assets" },
                "palettes": {
                  "route.ts": "GET/POST palettes",
                  "[paletteId]": { "route.ts": "PATCH/DELETE palette" }
                },
                "typography": { "route.ts": "GET/POST typography" }
              },
              "geometries": { "route.ts": "GET/POST geometries" },
              "governance": {
                "route.ts": "GET governance summary",
                "meetings": {
                  "route.ts": "GET/POST meetings",
                  "[meetingId]": { "route.ts": "GET/PATCH meeting" }
                },
                "motions": {
                  "route.ts": "GET/POST motions",
                  "[motionId]": {
                    "route.ts": "GET/PATCH motion",
                    "votes": { "route.ts": "GET/POST votes" },
                    "finalize": { "route.ts": "POST finalize" }
                  }
                }
              },
              "map": { "route.ts": "GET entity map payload" }
            }
          },
          "branding": {
            "assets": { "route.ts": "admin/global asset ops (if needed)" },
            "slots": { "route.ts": "asset slot definitions" }
          },
          "auth": "(login/callback/confirm/signout etc.)",
          "stripe": "donations + subscriptions",
          "admin": "global admin-only endpoints"
        },
        "entities": {
          "[id]": { "page.tsx": "Entity page using shared layout + tabs" }
        },
        "(marketing)": "public pages like /info /terms /privacy",
        "map": { "page.tsx": "map explorer" }
      },
      "components": {
        "entity": {
          "layout": {
            "EntityPageLayout.tsx": "shell + sidebar headings + logo",
            "EntitySidebar.tsx": "sidebar navigation",
            "EntityHeader.tsx": "header shared"
          },
          "tabs": {
            "overview": "EntityOverviewTab",
            "branding": "EntityBrandingTab",
            "users": "EntityUsersTab",
            "map": "EntityMapTab",
            "governance": "EntityGovernanceTab"
          },
          "branding": {
            "EntityLogo.tsx": "single source of truth",
            "panels": "branding panels"
          }
        },
        "map": "map shell + overlays + markers",
        "ui": "generic UI primitives"
      },
      "lib": {
        "server": {
          "auth": "session + RBAC helpers",
          "entities": "entity fetch + resolution",
          "branding": "branding resolution",
          "governance": "governance reads/writes"
        },
        "supabase": "client/server/admin",
        "api": "route helpers + error handling"
      },
      "domain": {
        "entities": "DTOs/types",
        "branding": "DTOs/types",
        "governance": "DTOs/types",
        "map": "DTOs/types"
      },
      "scripts": "imports + migrations helpers"
    },
    "action_map": [
      {
        "category": "API consolidation",
        "items": [
          "Prefer /app/api/entities/[id]/... as the canonical entity surface area",
          "Deprecate entity-specific legacy routes: /app/api/districts, /app/api/nonprofits, /app/api/businesses once the entity routes cover them",
          "Choose ONE governance API surface: either under /entities/[id]/governance/* or /api/governance/* (recommend: keep entity-scoped for entity pages)"
        ]
      },
      {
        "category": "Component consolidation",
        "items": [
          "Keep /app/components/entities/* as primary; migrate district/nonprofit-specific panels into entity tabs where possible",
          "Consolidate any remaining PrimaryDistrictLogo-like components into /app/components/branding/EntityLogo.tsx",
          "Quarantine /keeper-archive: no new imports; migrate only whats still in use"
        ]
      },
      {
        "category": "Types/DTOs",
        "items": [
          "Reduce /app/data/* sprawl by moving DTOs into /domain/<area>/* or /lib/types/<area>/*",
          "Keep a single source for DB types (database.types.ts) and map to DTOs explicitly"
        ]
      },
      {
        "category": "Housekeeping",
        "items": [
          "Move scratchfiles out of repo or add to gitignore (they are noise for AI + reviews)",
          "Avoid committing .env.local and .env.test.local (secrets risk); keep .env.example only"
        ]
      }
    ],
    "next_steps": [
      "Pick the canonical governance API surface (entity-scoped vs global) and delete/redirect the other set",
      "Create /lib/server/rbac.ts (or similar) and update all route handlers to use it",
      "Create an inventory of duplicated DTOs/types across /app/data and /lib/types and collapse them"
    ]
  },
  {
    "type": "migration_map",
    "title": "V2 consolidation checklist (moves/merges/deprecations)",
    "status_legend": {
      "planned": "not started",
      "in_progress": "actively being worked",
      "done": "completed"
    },
    "rules": [
      "Do not change runtime behavior while moving files; do mechanical moves first, then refactor",
      "Prefer adding new canonical endpoints/components, then switching callers, then deleting old ones",
      "No new imports from keeper-archive or scratchfiles",
      "Keep PRs small: one category at a time (API, components, DTOs/types, utils)"
    ],
    "phases": [
      {
        "phase": "0-prep",
        "goal": "Create guardrails so moves are safe",
        "items": [
          {
            "action": "add",
            "path": "docs/migration-map.md",
            "status": "planned",
            "notes": "High-level checklist + decision log (governance API surface, branding resolution rules, etc.)"
          },
          {
            "action": "add",
            "path": "scripts/structure-diff.ts",
            "status": "planned",
            "notes": "Optional: compare project-structure.current.json vs project-structure.target.json"
          },
          {
            "action": "deprecate",
            "path": "scratchfiles/*",
            "status": "planned",
            "notes": "Add to .gitignore or move out of repo; keep only if intentionally referenced"
          },
          {
            "action": "deprecate",
            "path": "app/components/keeper-archive/* and app/lib/keeper-archive/*",
            "status": "planned",
            "notes": "No new imports; migrate only what is still used, then delete"
          }
        ]
      },
      {
        "phase": "1-api-canonicalization",
        "goal": "Make /app/api/entities/[id]/... the canonical entity surface; reduce duplication",
        "items": [
          {
            "action": "decision",
            "path": "app/api/governance/* vs app/api/entities/[id]/governance/*",
            "status": "planned",
            "notes": "Pick ONE canonical governance surface. Recommendation: entity-scoped for entity pages; keep global only for cross-entity admin workflows. After decision, add redirects or remove duplicates."
          },
          {
            "action": "deprecate",
            "path": "app/api/districts/*",
            "status": "planned",
            "notes": "Replace callers with app/api/entities/[id]/route.ts and app/api/entities/[id]/geometries + branding + users as needed"
          },
          {
            "action": "deprecate",
            "path": "app/api/nonprofits/*",
            "status": "planned",
            "notes": "Replace callers with entity routes; keep nonprofit-specific routes only if truly nonprofit-only semantics remain"
          },
          {
            "action": "deprecate",
            "path": "app/api/businesses/*",
            "status": "planned",
            "notes": "Replace callers with entity routes; keep approve/reject/claimed only if not expressible via entity users/relationships"
          },
          {
            "action": "merge",
            "from": "app/api/entity-users/route.ts",
            "to": "app/api/entities/[id]/users/route.ts",
            "status": "planned",
            "notes": "Entity-scoped users endpoint becomes canonical; keep /entity-users only for admin bulk ops if needed"
          },
          {
            "action": "review",
            "path": "app/api/branding/assets/* and app/api/entities/[id]/branding/assets/*",
            "status": "planned",
            "notes": "Define canonical: entity-scoped CRUD; keep global /branding/assets only for slot definitions or privileged admin workflows"
          },
          {
            "action": "review",
            "path": "app/api/map/* and app/api/entities/[id]/map/route.ts",
            "status": "planned",
            "notes": "Decide which map endpoints are page-level (home/state) vs entity-scoped (entity explorer payload). Remove duplication after callers migrate."
          },
          {
            "action": "add",
            "path": "app/lib/server/rbac.ts",
            "status": "planned",
            "notes": "Centralize role checks and helpers used by route handlers (global admin, entity admin, board member)"
          },
          {
            "action": "add",
            "path": "app/lib/server/route-context.ts",
            "status": "planned",
            "notes": "Shared helper: get supabase server client + session + resolve entity (id/slug) + standard error responses"
          }
        ]
      },
      {
        "phase": "2-components-entity-first",
        "goal": "Make entity pages the primary UI; migrate district/nonprofit one-offs into entity tabs",
        "items": [
          {
            "action": "merge",
            "from": "app/components/districts/*",
            "to": "app/components/entities/tabs/*",
            "status": "planned",
            "notes": "Migrate only what is actively used; keep district-only UI if it has unique UX not yet generalized"
          },
          {
            "action": "merge",
            "from": "app/components/nonprofits/*",
            "to": "app/components/entities/tabs/governance/*",
            "status": "planned",
            "notes": "GovernancePanel/BoardOfDirectors should become entity governance tab components"
          },
          {
            "action": "normalize",
            "path": "app/components/branding/EntityLogo.tsx",
            "status": "planned",
            "notes": "Ensure this is the single logo component used everywhere; remove any PrimaryDistrictLogo-style duplicates"
          },
          {
            "action": "move",
            "from": "app/components/maps/*",
            "to": "app/components/map/*",
            "status": "planned",
            "notes": "Normalize naming and isolate overlays/marker/shell under one map domain"
          },
          {
            "action": "review",
            "path": "app/components/ui/district-sidebar.tsx and other district-* UI primitives",
            "status": "planned",
            "notes": "Promote truly generic UI to ui/*; keep district-specific UI under entity/district or remove"
          }
        ]
      },
      {
        "phase": "3-dtos-and-types",
        "goal": "Reduce /app/data sprawl; co-locate DTOs with domains",
        "items": [
          {
            "action": "move",
            "from": "app/data/*.ts",
            "to": "domain/<area>/*.ts",
            "status": "planned",
            "notes": "Split by domain: entities/branding/governance/map/users/receipts"
          },
          {
            "action": "merge",
            "from": "app/lib/types/*",
            "to": "domain/<area>/*",
            "status": "planned",
            "notes": "Consolidate types; keep database.types.ts as DB layer only"
          },
          {
            "action": "add",
            "path": "domain/index.ts",
            "status": "planned",
            "notes": "Optional barrel exports per domain to reduce import chaos"
          }
        ]
      },
      {
        "phase": "4-cleanup-and-deletion",
        "goal": "Remove deprecated routes/components once callers are migrated",
        "items": [
          {
            "action": "delete",
            "path": "api/districts (top-level folder)",
            "status": "planned",
            "notes": "Looks unused with Next app routes present; delete if no imports/references"
          },
          {
            "action": "delete",
            "path": "app/api/district-users and app/api/user-districts (if unused)",
            "status": "planned",
            "notes": "Confirm callers; replace with entity-users patterns"
          },
          {
            "action": "delete",
            "path": "legacy duplicated governance endpoints",
            "status": "planned",
            "notes": "After canonical governance surface chosen and UI migrated"
          },
          {
            "action": "delete",
            "path": "keeper-archive folders",
            "status": "planned",
            "notes": "After no imports remain"
          }
        ]
      }
    ],
    "open_questions": [
      {
        "question": "Canonical governance API surface?",
        "options": [
          "Entity-scoped: /app/api/entities/[id]/governance/*",
          "Global: /app/api/governance/*",
          "Hybrid: entity-scoped for entity UI + global for cross-entity admin"
        ],
        "recommendation": "Hybrid, but enforce that entity UI only calls the entity-scoped surface",
        "status": "planned"
      },
      {
        "question": "Branding assets canonical endpoints?",
        "options": [
          "Entity-scoped CRUD only",
          "Global branding assets CRUD + entity filters"
        ],
        "recommendation": "Entity-scoped CRUD; keep global only for slots/metadata",
        "status": "planned"
      }
    ]
  },
  { "type": "report", "directories": 198, "files": 348 }
]
